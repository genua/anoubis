.\"	$OpenBSD: mdoc.template,v 1.9 2004/07/02 10:36:57 jmc Exp $
.\"
.\" Copyright (c) 2009 GeNUA mbH <info@genua.de>
.\"
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
.\" "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
.\" LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
.\" A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
.\" OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
.\" SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
.\" TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
.\" PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
.\" LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
.\" NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
.\" SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd July 10, 2009
.Dt anoubisd.conf 5
.Os Anoubis
.Sh NAME
anoubisd.conf \-
.Xr anoubisd 8
configuration file
.Sh SYNOPSIS
/etc/anoubis/anoubisd.conf
.Sh DESCRIPTION
The
.Ar anoubisd.conf
file is the main configuration file for
.Xr anoubisd 8 .
It specifies various configuration options for the Anoubis daemon
process. Most of these options are Operating System specific and should
not be changed.
.Pp
Entries use the following format:
.Pp
option = value
.Pp
Lines starting with a hash mark
.Sq #
and empty lines are ignored. If a line ends with a backslash
.Sq \e
the value is continued on the next line.
.Pp
The configuration options are:
.Bl -tag -width Ds
.It \fBunixsocket\fP
Specifies the Unix Domain Socket used for communication with
clients, such as
.Xr anoubisctl 8
or
.Xr xanoubis 1 .
The default is
.Ar /var/run/anoubisd.sock .
.It \fBupgrade_mode\fP
.Xr anoubisd 8
has special support for software upgrades. During an upgrade it will automatically recalculate checksums for updated files. The upgrade_mode option specifies how the start and end of an upgrade are triggered.
Possible values are:
.Pp
.Ar off
- The upgrade process is disabled, no upgrade support is enabled.
.Pp
.Ar strictlock
When the file specified with the \fBupgrade_trigger\fP option is
locked (using 
.Xr flock 2
or
.Xr fcntl 2
), the upgrade starts. When the same file is unlocked
the upgrade ends.
The lockfile should be configured using the \fBupgrade_trigger\fP option.
.Pp
.Ar looselock
When the file specified by the \fBupgrade_trigger\fP option is
locked (using 
.Xr flock 2
or
.Xr fcntl 2
), the upgrade starts.
When the process which has locked the file exits, the upgrade ends.
.Pp
.Ar process
The upgrade is triggered by starting a process, when it exits the
upgrade ends. The pathname of the program is configured using the
\fBupgrade_trigger\fP option.
.Pp
The default is
.Ar off .
.It \fBupgrade_trigger\fP
This option specifies a comma-separated list of upgrade triggers.
The correct value highly depends on the \fBupgrade_mode\fP option.
When
.Sq strictlock
or
.Sq looselock
is configured this option should contain the pathname of 
at least one lock file. If
.Sq process
is configured this option should specify
the pathname of an upgrade program. If more than one value is
configured then any match will trigger the upgrade process.
.Pp
By default no trigger is configured.
.El
.Sh SEE ALSO
.Xr anoubisd 8
.Sh AUTHORS
Robin Doer
